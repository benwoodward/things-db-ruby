#!/usr/bin/env ruby

$LOAD_PATH.unshift File.expand_path("..", "lib")
require 'things'

TIMES_OF_DAY_TAGS = {
  first_thing: ['when:first-thing'],
  morning:     ['when:morning'],
  anytime:     nil,
  afternoon:   ['when:afternoon'],
  evening:     ['when:evening']
}

TASK_CATEGORY_TAGS = {
  chores:        ['what:chore'],
  focussed_work: ['what:focussed-work', 'what:code', 'what:research'],
  other:         nil,
  errands:       ['what:errand', 'what:shopping-trip', 'what:appointment'],
  admin:         ['what:admin', 'what:phonecall', 'what:email', 'what:message'],
  downtime:      ['what:downtime', 'what:to-watch', 'what:to-read']
}

today = Today.new(
  times_of_day: TIMES_OF_DAY_TAGS,
  task_categories: TASK_CATEGORY_TAGS
)

class Printer
  def self.recursive_group_printer(group)
    if group.has_tasks?
      if group.has_groups?
        puts group.print_heading
        group.groups.each do |_, group|
          # require 'pry'; binding.pry
          self.recursive_group_printer(group)
        end
      else
        puts group.print_heading
        group.tasks.each do |task|
          puts "      #{task.title}"
        end
      end
    end
  end
end

puts "\n\n\n\n\n\n"
Printer.recursive_group_printer(today)

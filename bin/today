#!/usr/bin/env ruby

$LOAD_PATH.unshift File.expand_path("..", "lib")
require 'things'

TIMES_OF_DAY_TAGS = {
  first_thing: ['when:first-thing'],
  morning:     ['when:morning'],
  anytime:     nil,
  afternoon:   ['when:afternoon'],
  evening:     ['when:evening']
}

TASK_CATEGORY_TAGS = {
  chores:        ['what:chore'],
  focussed_work: ['what:focussed-work', 'what:code', 'what:research'],
  other:         nil,
  errands:       ['what:errand', 'what:shopping-trip', 'what:appointment'],
  admin:         ['what:admin', 'what:phonecall', 'what:email', 'what:message'],
  downtime:      ['what:downtime', 'what:to-watch', 'what:to-read']
}

sorted_tasks = Today.new(
  times_of_day: TIMES_OF_DAY_TAGS,
  task_categories: TASK_CATEGORY_TAGS
).sorted_tasks

puts ''
puts ''
puts ''
puts ''
puts ''
puts ''
sorted_tasks.each do |time_of_day, sorted_time_group|
  if sorted_time_group.has_tasks?
    puts "==================#{sorted_time_group.name.upcase}====================="
    # require 'pry'; binding.pry
    sorted_time_group.task_groups.each do |task_type, task_group|
      if !task_group.tasks.empty?
        puts "#{task_group.title}........"
        # require 'pry'; binding.pry
        task_group.tasks.each do |task|
          puts task.title
        end
        puts ''
        puts ''
      end
    end
  end
end

# Queries.todays_tasks.each do |task|
#   puts task.title
# end
